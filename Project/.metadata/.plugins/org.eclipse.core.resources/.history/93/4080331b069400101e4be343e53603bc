// @strict-types

// Добавить склад.
// 
// Параметры:
//  Команда - КомандаФормы
&НаКлиенте
Процедура ДобавитьСклад(Команда)
	Наименование = Объект.Наименование;
	Адрес = Объект.Адрес;
	Ответ = МодульСкладыКлиент.СоздатьПустойСкладКлиент(Наименование, Адрес);	
	ОповеститьОбИзменении(Ответ.СкладСсылка);
	МодульФормКлиент.ЗакрытьБезСохранения(ЭтотОбъект);
КонецПроцедуры

// Сохранить изменения товаров на складе.
// 
// Параметры:
//  Команда - КомандаФормы
&НаКлиенте
Процедура СохранитьИзмененияТоваровНаСкладе(Команда)
	Запрос = Новый Структура;	
	МассивТоваров = Новый Массив;
	СсылкаСклада = Объект.Ссылка;
	Для Каждого СтрокаТовара Из Объект.ТоварыНаСкладе Цикл
		ТоварСтруктура = Новый Структура;
		ТоварСтруктура.Вставить("СсылкаТовара", СтрокаТовара.Товар);		
		ТоварСтруктура.Вставить("ЕдиницаИзмерения", СтрокаТовара.ЕдиницаИзмерения);
		ТоварСтруктура.Вставить("ЦенаПокупки", СтрокаТовара.ЦенаПокупки);
		ТоварСтруктура.Вставить("ЦенаПродажи", СтрокаТовара.ЦенаПродажи);
		ТоварСтруктура.Вставить("Спред", СтрокаТовара.Спред);
		ТоварСтруктура.Вставить("Количество", СтрокаТовара.Количество);
		МассивТоваров.Добавить(ТоварСтруктура);		
	КонецЦикла;	
	Запрос.Вставить("СсылкаСклада", КодСклада);
	Запрос.Вставить("СписокТоваров", МассивТоваров);
КонецПроцедуры